import{N as oe,C as se,i as h,t as ue,e as de,u as x,l as p,j as fe,H as K,p as ve,T as pe,o as z}from"./hidden-81653952.js";import{d as Q,m as g,J as W,G as F,j as S,M as X,L as w,y as me,n as ce,N as H,K as $}from"./index-6e1d8700.js";function je(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function M(){let e=[],t={addEventListener(n,r,i,a){return n.addEventListener(r,i,a),t.add(()=>n.removeEventListener(r,i,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);t.add(()=>clearTimeout(r))},style(n,r,i){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=M();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let i of e.splice(r,1))i()}},dispose(){for(let n of e.splice(0))n()}};return t}function he(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function O(e,...t){e&&t.length>0&&e.classList.add(...t)}function L(e,...t){e&&t.length>0&&e.classList.remove(...t)}var j=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(j||{});function ge(e,t){let n=M();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:i}=getComputedStyle(e),[a,l]=[r,i].map(o=>{let[u=0]=o.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,f)=>f-d);return u});return a!==0?n.setTimeout(()=>t("finished"),a+l):t("finished"),n.add(()=>t("cancelled")),n.dispose}function G(e,t,n,r,i,a){let l=M(),o=a!==void 0?he(a):()=>{};return L(e,...i),O(e,...t,...n),l.nextFrame(()=>{L(e,...n),O(e,...r),l.add(ge(e,u=>(L(e,...r,...t),O(e,...i),o(u))))}),l.add(()=>L(e,...t,...n,...r,...i)),l.add(()=>o("cancelled")),l.dispose}function c(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let P=Symbol("TransitionContext");var ye=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ye||{});function be(){return H(P,null)!==null}function Se(){let e=H(P,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function Te(){let e=H(q,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let q=Symbol("NestingContext");function A(e){return"children"in e?A(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function Y(e){let t=g([]),n=g(!1);S(()=>n.value=!0),X(()=>n.value=!1);function r(a,l=h.Hidden){let o=t.value.findIndex(({id:u})=>u===a);o!==-1&&(x(l,{[h.Unmount](){t.value.splice(o,1)},[h.Hidden](){t.value[o].state="hidden"}}),!A(t)&&n.value&&(e==null||e()))}function i(a){let l=t.value.find(({id:o})=>o===a);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:a,state:"visible"}),()=>r(a,h.Unmount)}return{children:t,register:i,unregister:r}}let Z=oe.RenderStrategy,Ee=Q({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r,expose:i}){let a=g(0);function l(){a.value|=p.Opening,t("beforeEnter")}function o(){a.value&=~p.Opening,t("afterEnter")}function u(){a.value|=p.Closing,t("beforeLeave")}function d(){a.value&=~p.Closing,t("afterLeave")}if(!be()&&se())return()=>W(Fe,{...e,onBeforeEnter:l,onAfterEnter:o,onBeforeLeave:u,onAfterLeave:d},r);let f=g(null),s=g("visible"),_=F(()=>e.unmount?h.Unmount:h.Hidden);i({el:f,$el:f});let{show:y,appear:D}=Se(),{register:N,unregister:C}=Te(),R={value:!0},b=ue(),T={value:!1},U=Y(()=>{!T.value&&s.value!=="hidden"&&(s.value="hidden",C(b),d())});S(()=>{let v=N(b);X(v)}),w(()=>{if(_.value===h.Hidden&&b){if(y&&s.value!=="visible"){s.value="visible";return}x(s.value,{hidden:()=>C(b),visible:()=>N(b)})}});let V=c(e.enter),k=c(e.enterFrom),ee=c(e.enterTo),I=c(e.entered),te=c(e.leave),ne=c(e.leaveFrom),re=c(e.leaveTo);S(()=>{w(()=>{if(s.value==="visible"){let v=z(f);if(v instanceof Comment&&v.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function ae(v){let B=R.value&&!D.value,m=z(f);!m||!(m instanceof HTMLElement)||B||(T.value=!0,y.value&&l(),y.value||u(),v(y.value?G(m,V,k,ee,I,E=>{T.value=!1,E===j.Finished&&o()}):G(m,te,ne,re,I,E=>{T.value=!1,E===j.Finished&&(A(U)||(s.value="hidden",C(b),d()))})))}return S(()=>{me([y],(v,B,m)=>{ae(m),R.value=!1},{immediate:!0})}),$(q,U),de(F(()=>x(s.value,{visible:p.Open,hidden:p.Closed})|a.value)),()=>{let{appear:v,show:B,enter:m,enterFrom:E,enterTo:we,entered:Ae,leave:Ce,leaveFrom:Be,leaveTo:Oe,...J}=e,le={ref:f},ie={...J,...D&&y&&fe.isServer?{class:ce([n.class,J.class,...V,...k])}:{}};return K({theirProps:ie,ourProps:le,slot:{},slots:r,attrs:n,features:Z,visible:s.value==="visible",name:"TransitionChild"})}}}),Le=Ee,Fe=Q({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:r}){let i=ve(),a=F(()=>e.show===null&&i!==null?(i.value&p.Open)===p.Open:e.show);w(()=>{if(![!0,!1].includes(a.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=g(a.value?"visible":"hidden"),o=Y(()=>{l.value="hidden"}),u=g(!0),d={show:a,appear:F(()=>e.appear||!u.value)};return S(()=>{w(()=>{u.value=!1,a.value?l.value="visible":A(o)||(l.value="hidden")})}),$(q,o),$(P,d),()=>{let f=pe(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),s={unmount:e.unmount};return K({ourProps:{...s,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[W(Le,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...s,...f},r.default)]},attrs:{},features:Z,visible:l.value==="visible",name:"Transition"})}}});export{Fe as S,Ee as h,M as r,je as t};
